version: '2.1'
orbs:
  win: circleci/windows@2.4

jobs:
  build:
    executor:
      name: win/default
      size: medium
    steps:
      - run:
          name: Profile CPU and memory usage (background)
          background: true
          command: |
            while ($true) {
                wmic cpu get loadpercentage
                write-host "---------"
                start-sleep -Seconds 1
                
            }    
      - checkout
      - run: 'Write-Host ''Hello, Windows'''
      

workflows:
  my-workflow:
    jobs:
      - build
